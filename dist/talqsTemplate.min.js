/**
 * TalqsTemplate v1.0.0
 * (c) 2017 JinJun He
 * @license MIT
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.TalqsTemplate=n()}(this,function(){"use strict";function e(e){return e.replace($,"").replace(b,",").replace(w,"").replace(_,"").replace(x,"").split(q)}function n(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function a(a,i){function t(e){return f+=e.split(/\n/).length-1,d&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=y[1]+n(e)+y[2]+"\n"),e}function l(n){var a=f;if(o?n=o(n,i):r&&(n=n.replace(/\n/g,function(){return f++,"$line="+f+";"})),0===n.indexOf("=")){var t=u&&!/^=[=#]/.test(n);if(n=n.replace(/^=[=#]?|[\s;]*$/g,""),t){var l=n.replace(/\s*\([^\)]+\)/,"");p[l]||/^(include|print)$/.test(l)||(n="$escape("+n+")")}else n="$string("+n+")";n=y[1]+n+y[2]}return r&&(n="$line="+a+";"+n),h(e(n),function(e){if(e&&!g[e]){var n;n="print"===e?b:"include"===e?w:p[e]?"$utils."+e:v[e]?"$helpers."+e:"$data."+e,_+=e+"="+n+",",g[e]=!0}}),n+"\n"}var r=i.debug,s=i.openTag,c=i.closeTag,o=i.parser,d=i.compress,u=i.escape,f=1,g={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},m="".trim,y=m?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],$=m?"$out+=text;return $out;":"$out.push(text);",b="function(){var text=''.concat.apply('',arguments);"+$+"}",w="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+$+"}",_="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(r?"$line=0,":""),x=y[0],q="return new String("+y[3]+");";h(a.split(s),function(e){e=e.split(c);var n=e[0],a=e[1];1===e.length?x+=t(n):(x+=l(n),a&&(x+=t(a)))});var I=_+x+q;r&&(I="try{"+I+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+n(a)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var z=new Function("$data","$filename",I);return z.prototype=p,z}catch(e){throw e.temp="function anonymous($data,$filename) {"+I+"}",e}}var i=function(e,n){return"string"==typeof n?m(n,{filename:e}):r(e,n)};i.version="3.0.0",i.config=function(e,n){t[e]=n};var t=i.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},l=i.cache={};i.render=function(e,n){return m(e)(n)};var r=i.renderFile=function(e,n){var a=i.get(e)||g({filename:e,name:"Render Error",message:"Template not found"});return n?a(n):a};i.get=function(e){var n;if(l[e])n=l[e];else if("object"==typeof document){var a=document.getElementById(e);if(a){var i=(a.value||a.innerHTML).replace(/^\s*|\s*$/g,"");n=m(i,{filename:e})}}return n};var s=function(e,n){return"string"!=typeof e&&(n=typeof e,"number"===n?e+="":e="function"===n?s(e.call(e)):""),e},c={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},o=function(e){return c[e]},d=function(e){return s(e).replace(/&(?![\w#]+;)|[<>"']/g,o)},u=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},f=function(e,n){var a,i;if(u(e))for(a=0,i=e.length;a<i;a++)n.call(e,e[a],a,e);else for(a in e)n.call(e,e[a],a)},p=i.utils={$helpers:{},$include:r,$string:s,$escape:d,$each:f};i.helper=function(e,n){v[e]=n};var v=i.helpers=p.$helpers;i.onerror=function(e){var n="Template Error\n\n";for(var a in e)n+="<"+a+">\n"+e[a]+"\n\n";"object"==typeof console&&console.error(n)};var g=function(e){return i.onerror(e),function(){return"{Template Error}"}},m=i.compile=function(e,n){function i(a){try{return new c(a,s)+""}catch(i){return n.debug?g(i)():(n.debug=!0,m(e,n)(a))}}n=n||{};for(var r in t)void 0===n[r]&&(n[r]=t[r]);var s=n.filename;try{var c=a(e,n)}catch(e){return e.filename=s||"anonymous",e.name="Syntax Error",g(e)}return i.prototype=c.prototype,i.toString=function(){return c.toString()},s&&n.cache&&(l[s]=i),i},h=p.$each,y="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",$=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,b=/[^\w$]+/g,w=new RegExp(["\\b"+y.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),_=/^\d[^,]*|,\d[^,]*/g,x=/^,+|,+$/g,q=/^$|,+/;t.openTag="{{",t.closeTag="}}";var I=function(e,n){var a=n.split(":"),i=a.shift(),t=a.join(":")||"";return t&&(t=", "+t),"$helpers."+i+"("+e+t+")"};t.parser=function(e,n){e=e.replace(/^\s/,"");var a=e.split(" "),t=a.shift(),l=a.join(" ");switch(t){case"if":e="if("+l+"){";break;case"else":a="if"===a.shift()?" if("+a.join(" ")+")":"",e="}else"+a+"{";break;case"/if":e="}";break;case"each":var r=a[0]||"$data",s=a[1]||"as",c=a[2]||"$value",o=a[3]||"$index",d=c+","+o;"as"!==s&&(r="[]"),e="$each("+r+",function("+d+"){";break;case"/each":e="});";break;case"echo":e="print("+l+");";break;case"print":case"include":e=t+"("+a.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(l)){var u=!0;0===e.indexOf("#")&&(e=e.substr(1),u=!1);for(var f=0,p=e.split("|"),v=p.length,g=p[f++];f<v;f++)g=I(g,p[f]);e=(u?"=":"=#")+g}else e=i.helpers[t]?"=#"+t+"("+a.join(",")+");":"="+e}return e};var z="question",A="stemsWrapper",T="analyzeWrapper",S="childQSAnalyzeWrapper",Q="questionAnswerItem",L="questionAnalyzeItem",C="questionKnowledgePointItem",k={Question:z,StemsWrapper:A,ChildQSAnalyze:S,AnalyzeWrapper:T,Index:"questionIndex",Source:"questionSource",Difficulty:"questionDifficulty",Content:"questionContent",Options:"questionOptions",ChildList:"questionChildList",Answer:"questionAnswer",AnswerItem:Q,Analyze:"questionAnalyze",AnalyzeItem:L,KnowledgePoint:"questionKnowledgePoint",KnowledgePointItem:C,QueID:"questionID"},j={};j[z]=[A,T],j[A]=[k.Index,k.Source,k.Difficulty,k.Content,k.Options,k.ChildList,k.ChildQSAnalyze],j[T]=[k.Answer,k.Analyze,k.KnowledgePoint,k.QueID],j[S]=[k.Answer,k.Analyze,k.KnowledgePoint,k.QueID];var D={answer:"答案",analyze:"解析",queId:"ID",knowledgePoint:"知识点",label:"标签"},O={interactive:!1,analyzeVersion:0,hideSource:!1,hideDifficulty:!1,templates:j,labels:D,queIndex:0,entryTemplate:z},P=/(?:&nbsp;)*<(?:u|span\s[^>]+)>(?:&nbsp;|\s){3,}(\d*)(?:&nbsp;|\s){3,}<\/(?:u|span)>(?:&nbsp;)*/g,W={};W.json=function(e){return JSON.stringify(e)},W.formatDifficulty=function(e,n){e=parseInt(e,10)||0;for(var a="",i=0;i<e;i++)a+=n;return a},W.formatAnswer=function(e){var n="";if(Array.isArray(e))for(var a=e.length,i=0;i<a;i++)i%5==0&&i>0&&(n+=" "),n+=e[i];return n},W.transfromBlankContent=function(e,n){if(4==n){var a=-1;e=e.replace(P,function(e){return a++,'<input type="text" data-blank-item="'+a+'">'})}return e};var E,K="talqs",V=K+"_label",B=K+"_panel",R=K+"_tree",F="clearfix",H='<div class="'+K+"\">\n  {{ each config.templates['"+z+"'] }}\n    {{include $value}}\n  {{/each}}\n</div>\n",G=K+"_main",J='\n<div class="'+G+"\">\n {{each config.templates['"+A+"']}}\n    {{include $value}}\n {{/each}}\n</div>\n",M=K+"_analyzeGroup",N='\n  {{if config.analyzeVersion === 2}}\n     <div class="'+M+"\">\n      {{ each config.templates['"+T+"'] }}\n        {{include $value}}\n      {{/each}}\n    </div>\n  {{/if}}\n",U='\n{{if index && index > 0}}\n  <span class="'+K+'_index">\n    {{index}}\n  </span>\n{{/if}}\n',X='\n{{if !isSub && !config.hideSource}}\n  <div class="'+K+'_source">\n    {{data.queSource}}\n  </div>\n{{/if}}\n',Y=K+"_content clearfix",Z='\n{{if data.content && !data.hideContent}}\n  {{if config.interactive && data.logicQuesTypeId == 4}}\n    <div class="'+Y+'" data-talqs-type="blank" data-que-id="{{data.queId}}">\n      {{#data.content | transfromBlankContent:data.logicQuesTypeId}}\n    </div>\n  {{else}}\n    <div class="'+Y+'">\n      {{#data.content}}\n    </div>\n  {{/if}}\n{{/if}}\n',ee=K+"_options",ne={main:ee,list:ee+"_list",rows:ee+"_rows",columns:ee+"_columns",item:ee+"_columns_item",index:ee+"_index",label:ee+"_label",content:ee+"_content",clear:"clearfix"},ae={container:['data-talqs-type="choice"','data-que-id="{{data.queId}}"','data-logic-type="{{data.logicQuesTypeId}}"'],group:['data-option-group="{{$index}}"'],item:['data-option-item="{{$value.aoVal}}"']},ie=function(e){return ae[e].join(" ")},te='\n{{ if data.answerOptionList }}\n    <div class="'+ne.main+'" \n      {{if config.interactive && (data.logicQuesTypeId == 1 || data.logicQuesTypeId == 2) }}\n        '+ie("container")+'\n      {{/if}}>\n    <ul class="'+ne.list+'">\n      {{each data.answerOptionList }}\n        <li class="'+ne.rows+'">\n          {{if data.isCloze }}\n            <span class="'+ne.index+'">{{$index+1}}. </span>\n          {{/if}}\n          <ul class="'+ne.columns+"_{{$value.length}} "+ne.clear+'" \n            {{if config.interactive && (data.logicQuesTypeId == 1 || data.logicQuesTypeId == 2) }}\n              '+ie("group")+'\n            {{/if}}>\n            {{each $value}}\n              <li class="'+ne.item+" "+ne.clear+'" \n                {{if config.interactive && (data.logicQuesTypeId == 1 || data.logicQuesTypeId == 2) }}\n                  '+ie("item")+'\n                {{/if}}>\n                <span class="'+ne.label+'">{{$value.aoVal}}. </span>\n                <div class="'+ne.content+'">{{#$value.content}}</div>\n              </li>\n            {{/each}}\n          </ul>\n        </li>\n      {{/each}}\n    </ul>\n  </div>\n{{/if}}\n',le="<span>&#9733;</span>",re='\n{{if !isSub && !config.hideDifficulty}}\n  <div class="'+K+"_difficulty\">\n    {{#data.difficulty | formatDifficulty:'"+le+"'}}\n  </div>\n{{/if}}\n",se="{data:$value,config:config,index:$index+1,isSub:true}",ce='\n{{ if data.childList }}\n  <div class="'+K+"_subqs\">\n    {{each data.childList}}\n      {{include '"+A+"' "+se+" ''}}\n    {{/each}}\n  </div>\n{{/if}}\n",oe=K+"_analyzeSingle",de='\n{{if isSub && config.analyzeVersion === 1 && !data.childList }}\n   <div class="'+oe+"\">\n    {{ each config.templates['"+S+"'] }}\n      {{include $value}}\n    {{/each}}\n  </div>\n{{/if}}\n",ue='\n<div class="'+K+"_answer "+F+'">\n  <label class="'+V+'">\n    {{config.labels.answer}}\n  </label>\n  <div class="'+B+"\">\n    {{include '"+Q+"'}}\n  </div>\n</div>\n",fe='\n{{if data.childList}}\n  {{each data.childList}}\n    <div class="talqs_analyze_item">\n      <div class="talqs_analyze_item_index">{{$index+1}}</div>\n      {{include \''+Q+"' {data:$value} ''}}\n    </div>\n  {{/each}}\n{{else}}\n  <div class=\"talqs_panel_item\">\n    <div class=\"talqs_panel_item_content\">\n        {{if data.isCloze}}\n          {{data.answer | formatAnswer}}\n        {{else}}\n          {{#data.answer.join(' ')}}\n        {{/if}}\n    </div>\n  </div>\n{{/if}}\n",pe='\n<div class="'+K+"_analyze "+F+'">\n  <label class="'+V+'">\n    {{config.labels.analyze}}\n  </label>\n  <div class="'+B+"\">\n    {{include '"+L+"'}}\n  </div>\n</div>\n",ve='\n{{if data.childList}}\n  {{each data.childList}}\n    <div class="talqs_analyze_item">\n      <div class="talqs_analyze_item_index">{{$index+1}}</div>\n      {{include \''+L+'\' {data:$value} \'\'}}\n    </div>\n  {{/each}}\n{{else}}\n  <div class="talqs_panel_item">\n    <div class="talqs_panel_item_content">{{#data.analysis}}</div>\n  </div>\n{{/if}}\n',ge='\n <div class="'+K+"_knowledgePoint "+F+'">\n  <label class="'+V+'">\n    {{config.labels.knowledgePoint}}\n  </label>\n  <div class="'+R+"\">\n    <ul>\n      {{each data.examOptionList}}\n        {{include '"+C+"' {data:$value} ''}}\n      {{/each}}\n    </ul>\n  </div>\n</div>\n",me="\n<li>\n  {{data.name}}\n  {{if data.childList}}\n    <ul>\n      {{each data.childList}}\n        {{include '"+C+"' {data:$value} ''}}\n      {{/each}}\n    </ul>\n  {{/if}}\n</li>\n",he='\n<div class="'+K+"_id "+F+'">\n  <label class="'+V+'">\n    {{config.labels.queId}}\n  </label>\n  <div class="'+B+'">\n    {{data.queId}}  \n  </div>\n</div>\n',ye=(E={},E[k.Question]=H,E[k.StemsWrapper]=J,E[k.AnalyzeWrapper]=N,E[k.ChildQSAnalyze]=de,E[k.Index]=U,E[k.Source]=X,E[k.Content]=Z,E[k.Options]=te,E[k.Difficulty]=re,E[k.ChildList]=ce,E[k.Answer]=ue,E[k.AnswerItem]=fe,E[k.Analyze]=pe,E[k.AnalyzeItem]=ve,E[k.KnowledgePoint]=ge,E[k.KnowledgePointItem]=me,E[k.QueID]=he,E),$e={version:"1.0.0",config:O};$e.render=function(e,n){if(e){n=n||{};for(var a in O)void 0===n[a]&&(n[a]=O[a]);$e.config=n;var t=i.cache[n.entryTemplate],l=t({config:n,data:e,index:n.queIndex});return l}};var be=function(e,n){i.helper(e,n)};$e.registerHelper=be;var we=(function(){for(var e in W)be(e,W[e])}(),function(e){for(var n in e){var a=e[n].replace(/^\s*|\s*$/g,""),t=i.compile(a,{filename:n});i.cache[n]=t}});return we(ye),$e.registerComponent=we,$e.registerTemplate=function(e,n){$e.config.templates[e]=n},$e.updateTemplateList=function(e,n){var a,i,t=$e.config.templates[e]||[];n.forEach(function(e,n){i=e.component,i&&(a=t.indexOf(i),e.remove&&a>=0&&t.splice(a,1),a<0&&!e.remove&&(a=void 0!==e.index&&e.index<t.length?e.index:t.length,t.splice(a,0,i)))}),$e.config.templates[e]=t},$e});